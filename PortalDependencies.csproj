<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>8.0.30703</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{A7AD9B1B-FDDA-4D4F-B4C2-483D18D5E48E}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>Futurez.XrmToolBox</RootNamespace>
    <AssemblyName>Futurez.XrmToolBox.PortalDependencies</AssemblyName>
    <TargetFrameworks>net48</TargetFrameworks>
	<AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
    <FileAlignment>512</FileAlignment>
	<Version Condition="$(Version)==''">1.2023.7.1</Version>
	<AssemblyVersion>$(Version)</AssemblyVersion>
	<FileVersion>$(Version)</FileVersion>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  
  <ItemGroup>
    <Compile Update="PortalDependenciesControl.cs" />
    <Compile Update="PortalDependenciesControl.designer.cs">
      <DependentUpon>PortalDependenciesControl.cs</DependentUpon>
    </Compile>
  </ItemGroup>
  <!--<ItemGroup>
    <EmbeddedResource Include="PortalDependenciesControl.resx">
      <DependentUpon>PortalDependenciesControl.cs</DependentUpon>
      <SubType>Designer</SubType>
    </EmbeddedResource>
    <EmbeddedResource Include="Properties\Resources.resx">
      <Generator>ResXFileCodeGenerator</Generator>
      <LastGenOutput>Resources.Designer.cs</LastGenOutput>
    </EmbeddedResource>
  </ItemGroup>-->
  <ItemGroup>
    <EmbeddedResource Include="Config\FetchTemplates.xml" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="images\close_tab.png" />
    <Content Include="images\D365Logo.png" />
    <Content Include="images\floppy-80.png" />
    <Content Include="images\reload16px.png" />
  </ItemGroup>
	<ItemGroup>
		<PackageReference Include="xrmtb.XrmToolBox.Controls" Version="2.2.10" />
		<PackageReference Include="XrmToolBoxPackage" Version="1.2023.6.65" Link="Test" />
	</ItemGroup>
  <PropertyGroup>
    <PostBuildEvent>
		IF "$(Configuration)" == "Debug" (
		IF NOT EXIST "$(TargetDir)XrmToolBox" mkdir "$(TargetDir)XrmToolBox"
		IF NOT EXIST $(TargetDir)XrmToolBox\Plugins mkdir $(TargetDir)XrmToolBox\Plugins
		IF NOT EXIST $(TargetDir)XrmToolBox\Plugins\Futurez.XrmToolBox.PortalDependencies mkdir $(TargetDir)XrmToolBox\Plugins\Futurez.XrmToolBox.PortalDependencies
		xcopy "$(TargetDir)Futurez.XrmToolBox.PortalDependencies.dll" "$(TargetDir)XrmToolBox\Plugins\" /Y
		xcopy "$(TargetDir)Futurez.XrmToolBox.PortalDependencies.pdb" "$(TargetDir)XrmToolBox\Plugins\" /Y
		xcopy "$(TargetDir)xrmtb.XrmToolBox.Controls.*" "$(TargetDir)XrmToolBox\Plugins\Futurez.XrmToolBox.PortalDependencies" /Y
		)
		REM for NuGet package
		IF "$(Configuration)" == "Release" (
		IF NOT EXIST $(ProjectDir)NuGet\Package\lib\net48\Plugins\ mkdir $(ProjectDir)NuGet\Package\lib\net48\Plugins\
		IF NOT EXIST $(ProjectDir)NuGet\Package\lib\net48\Plugins\$(TargetName)\ mkdir $(ProjectDir)NuGet\Package\lib\net48\Plugins\$(TargetName)\
		xcopy "$(TargetDir)$(TargetFileName)" "$(ProjectDir)NuGet\Package\lib\net48\Plugins\" /Y
		xcopy "$(TargetDir)xrmtb.XrmToolBox.Controls.dll" "$(ProjectDir)NuGet\Package\lib\net48\Plugins\$(TargetName)\" /Y
		)</PostBuildEvent>
  </PropertyGroup>
 </Project>